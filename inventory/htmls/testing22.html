<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Drag & Drop File Viewer</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f5f5f5;
    }

    h1 {
      text-align: center;
    }

    .container {
      display: grid;
      grid-template-columns: 1fr 2fr;
      gap: 20px;
      max-width: 1000px;
      margin: auto;
    }

    .drop-zone {
      border: 2px dashed #888;
      border-radius: 10px;
      padding: 30px;
      text-align: center;
      background: white;
      color: #555;
      transition: background 0.2s, border-color 0.2s;
    }

    .drop-zone.dragover {
      background: #e8f0ff;
      border-color: #3b82f6;
      color: #1d4ed8;
    }

    .display-area {
      background: white;
      border-radius: 10px;
      padding: 20px;
      overflow-y: auto;
      max-height: 70vh;
    }

    .file-item {
      border-bottom: 1px solid #ddd;
      padding: 10px 0;
    }

    .file-item:last-child {
      border-bottom: none;
    }

    img {
      max-width: 100%;
      margin-top: 10px;
      border-radius: 6px;
    }

    pre {
      background: #111;
      color: #0f0;
      padding: 10px;
      border-radius: 6px;
      overflow-x: auto;
    }
  </style>
</head>
<body>

<h1>Drag & Drop File Viewer</h1>

<div class="container">
  <div id="dropZone" class="drop-zone">
    <p><strong>Drag files here</strong></p>
    <p>(Images, text files, etc.)</p>
  </div>

  <div id="displayArea" class="display-area">
    <p>Files will appear here ðŸ‘‡</p>
  </div>

  <div style="grid-column: span 2; text-align: center; margin-top: 10px;">
    <button id="saveBtn" style="padding:10px 20px; font-size:16px; cursor:pointer;">Save Files to Page</button>
  </div>
</div>

<script>
  const dropZone = document.getElementById('dropZone');
  const displayArea = document.getElementById('displayArea');
  const saveBtn = document.getElementById('saveBtn');

  let storedFiles = [];

  // Prevent default browser behavior
  ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
    dropZone.addEventListener(eventName, e => e.preventDefault());
    document.body.addEventListener(eventName, e => e.preventDefault());
  });

  // Highlight drop zone
  ['dragenter', 'dragover'].forEach(eventName => {
    dropZone.addEventListener(eventName, () => dropZone.classList.add('dragover'));
  });

  ['dragleave', 'drop'].forEach(eventName => {
    dropZone.addEventListener(eventName, () => dropZone.classList.remove('dragover'));
  });

  // Handle dropped files
  dropZone.addEventListener('drop', e => {
    const files = e.dataTransfer.files;
    [...files].forEach(handleFile);
  });

  function handleFile(file) {
    const fileDiv = document.createElement('div');
    fileDiv.className = 'file-item';
    fileDiv.innerHTML = `<strong>${file.name}</strong> (${Math.round(file.size / 1024)} KB)`;

    const fileData = { name: file.name, type: file.type, size: file.size, content: null };

    // Image files
    if (file.type.startsWith('image/')) {
      const img = document.createElement('img');
      const url = URL.createObjectURL(file);
      img.src = url;
      fileDiv.appendChild(img);

      const reader = new FileReader();
      reader.onload = () => fileData.content = reader.result;
      reader.readAsDataURL(file);
    }
    // Text files
    else if (file.type.startsWith('text/')) {
      const reader = new FileReader();
      reader.onload = () => {
        fileData.content = reader.result;
        const pre = document.createElement('pre');
        pre.textContent = reader.result;
        fileDiv.appendChild(pre);
      };
      reader.readAsText(file);
    }
    // Other files
    else {
      fileData.content = null;
      const p = document.createElement('p');
      p.textContent = 'Preview not available.';
      fileDiv.appendChild(p);
    }

    storedFiles.push(fileData);
    displayArea.appendChild(fileDiv);
  }
// Save files to localStorage
  saveBtn.addEventListener('click', () => {
    localStorage.setItem('savedFiles', JSON.stringify(storedFiles));
    alert('Files saved! They will persist on reload.');
  });

  // Load saved files on page load
  window.addEventListener('load', () => {
    const saved = JSON.parse(localStorage.getItem('savedFiles') || '[]');
    saved.forEach(file => {
      const fileDiv = document.createElement('div');
      fileDiv.className = 'file-item';
      fileDiv.innerHTML = `<strong>${file.name}</strong> (${Math.round(file.size / 1024)} KB)`;

      if (file.type.startsWith('image/') && file.content) {
        const img = document.createElement('img');
        img.src = file.content;
        fileDiv.appendChild(img);
      } else if (file.type.startsWith('text/') && file.content) {
        const pre = document.createElement('pre');
        pre.textContent = file.content;
        fileDiv.appendChild(pre);
      } else {
        const p = document.createElement('p');
        p.textContent = 'Preview not available.';
        fileDiv.appendChild(p);
      }

      displayArea.appendChild(fileDiv);
    });
    storedFiles = saved;
  });

</script>

</body>
</html>
